<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes Dashboard - clerikc.ru</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .dashboard {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .refresh-info {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            font-size: 0.9em;
        }
        
        .refresh-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .refresh-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .status-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .status-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .status-title {
            display: flex;
            align-items: center;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .status-online {
            background: #10b981;
            box-shadow: 0 0 10px #10b981;
        }
        
        .status-warning {
            background: #f59e0b;
            box-shadow: 0 0 10px #f59e0b;
        }
        
        .status-offline {
            background: #ef4444;
        }
        
        .status-count {
            background: #3b82f6;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .metric {
            text-align: center;
            padding: 15px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .metric:hover {
            transform: scale(1.05);
            background: rgba(16, 185, 129, 0.2);
        }
        
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #10b981;
        }
        
        .metric-label {
            font-size: 0.9em;
            color: #6b7280;
        }
        
        .links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }
        
        .link-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            text-decoration: none;
            color: #374151;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .link-card:hover {
            transform: translateY(-5px);
            border-color: #10b981;
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.2);
        }
        
        .tech-stack {
            margin-top: 40px;
            text-align: center;
            color: white;
        }
        
        .tech-icons {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .tech-icon {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 25px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        
        .deployment-info {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .info-item {
            padding: 10px;
            background: rgba(16, 185, 129, 0.05);
            border-radius: 8px;
            border-left: 4px solid #10b981;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #6b7280;
        }
        
        .error {
            background: #fee2e2;
            color: #dc2626;
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #dc2626;
        }
        
        .live-badge {
            background: #ef4444;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>üöÄ Kubernetes Dashboard <span class="live-badge">LIVE</span></h1>
            <p>–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–∞—à–±–æ—Ä–¥ –∫–ª–∞—Å—Ç–µ—Ä–∞ clerikc.ru</p>
            <div class="refresh-info">
                <span>–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: <span id="lastUpdate">—Ç–æ–ª—å–∫–æ —á—Ç–æ</span></span>
                <button class="refresh-btn" onclick="updateMetrics()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
        </div>
        
        <div class="status-grid">
            <!-- Kubernetes Cluster -->
            <div class="status-card">
                <div class="status-header">
                    <div class="status-title">
                        <div class="status-indicator status-online"></div>
                        <h3>Kubernetes Cluster</h3>
                    </div>
                    <div class="status-count" id="nodeCount">3</div>
                </div>
                <p>–ö–ª–∞—Å—Ç–µ—Ä Kind —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ</p>
                <div class="metrics">
                    <div class="metric">
                        <div class="metric-value" id="readyNodes">3</div>
                        <div class="metric-label">–ì–æ—Ç–æ–≤–æ –Ω–æ–¥</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="availability">100%</div>
                        <div class="metric-label">–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</div>
                    </div>
                </div>
            </div>
            
            <!-- Pods -->
            <div class="status-card">
                <div class="status-header">
                    <div class="status-title">
                        <div class="status-indicator status-online"></div>
                        <h3>–ü–æ–¥—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h3>
                    </div>
                    <div class="status-count" id="podCount">8</div>
                </div>
                <p id="podsStatusText">–í—Å–µ –ø–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ</p>
                <div class="metrics">
                    <div class="metric">
                        <div class="metric-value" id="runningPods">7</div>
                        <div class="metric-label">Running</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="pendingPods">1</div>
                        <div class="metric-label">Pending</div>
                    </div>
                </div>
            </div>
            
            <!-- Services -->
            <div class="status-card">
                <div class="status-header">
                    <div class="status-title">
                        <div class="status-indicator status-online"></div>
                        <h3>–°–µ—Ä–≤–∏—Å—ã</h3>
                    </div>
                    <div class="status-count" id="serviceCount">5</div>
                </div>
                <p>–°–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</p>
                <div class="metrics">
                    <div class="metric">
                        <div class="metric-value" id="externalServices">2</div>
                        <div class="metric-label">External</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="internalServices">3</div>
                        <div class="metric-label">Internal</div>
                    </div>
                </div>
            </div>
            
            <!-- Ingress & SSL -->
            <div class="status-card">
                <div class="status-header">
                    <div class="status-title">
                        <div class="status-indicator status-online"></div>
                        <h3>Ingress & SSL</h3>
                    </div>
                    <div class="status-count" id="ingressRules">3</div>
                </div>
                <p>Ingress –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω</p>
                <div class="metrics">
                    <div class="metric">
                        <div class="metric-value" id="sslStatus">üîí</div>
                        <div class="metric-label">SSL</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="ingressCount">3</div>
                        <div class="metric-label">–ü—Ä–∞–≤–∏–ª–∞</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="deployment-info">
            <h3>üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏</h3>
            <div class="info-grid">
                <div class="info-item">
                    <strong>–ö–ª–∞—Å—Ç–µ—Ä:</strong> <span id="clusterName">kind-clerikc.ru</span>
                </div>
                <div class="info-item">
                    <strong>–í–µ—Ä—Å–∏—è Kubernetes:</strong> <span id="k8sVersion">v1.30.0</span>
                </div>
                <div class="info-item">
                    <strong>–í—Å–µ–≥–æ –ø–æ–¥–æ–≤:</strong> <span id="totalPods">8</span> (<span id="runningCount">7</span> running)
                </div>
                <div class="info-item">
                    <strong>Namespace:</strong> <span id="namespaces">default, kube-system, ingress-nginx</span>
                </div>
                <div class="info-item">
                    <strong>–°–µ—Ä–≤–∏—Å—ã:</strong> <span id="totalServices">5</span> (<span id="externalCount">2</span> external)
                </div>
                <div class="info-item">
                    <strong>Ingress:</strong> <span id="ingressStatus">–ê–∫—Ç–∏–≤–µ–Ω</span>
                </div>
                <div class="info-item">
                    <strong>SSL:</strong> <span id="sslText">–í–∫–ª—é—á–µ–Ω</span>
                </div>
                <div class="info-item">
                    <strong>–û–±–Ω–æ–≤–ª–µ–Ω–æ:</strong> <span id="updateTime">—Ç–æ–ª—å–∫–æ —á—Ç–æ</span>
                </div>
            </div>
        </div>
        
        <div class="links">
            <a href="/" class="link-card">
                <h4>üè† –ì–ª–∞–≤–Ω–∞—è</h4>
                <p>–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
            </a>
            <a href="https://github.com/clerikc-ru/nginx-cicd/actions" class="link-card" target="_blank">
                <h4>‚öôÔ∏è CI/CD</h4>
                <p>GitHub Actions –ø–∞–π–ø–ª–∞–π–Ω</p>
            </a>
            <a href="https://github.com/clerikc-ru/nginx-cicd" class="link-card" target="_blank">
                <h4>üìÅ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</h4>
                <p>–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞</p>
            </a>
            <a href="/health" class="link-card">
                <h4>‚ù§Ô∏è Health Check</h4>
                <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è</p>
            </a>
            <a href="http://185.8.22.53:30080/metrics" class="link-card">
                <h4>üìà –ú–µ—Ç—Ä–∏–∫–∏</h4>
                <p>–°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏</p>
            </a>
            <a href="http://185.8.22.53:30080/api" class="link-card">
                <h4>‚ÑπÔ∏è API Info</h4>
                <p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∞—Å—Ç–µ—Ä–µ</p>
            </a>
        </div>
        
        <div class="tech-stack">
            <h3>üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫</h3>
            <div class="tech-icons">
                <div class="tech-icon">Kubernetes</div>
                <div class="tech-icon">Docker</div>
                <div class="tech-icon">GitHub Actions</div>
                <div class="tech-icon">Nginx</div>
                <div class="tech-icon">Kind</div>
                <div class="tech-icon">SSL/TLS</div>
                <div class="tech-icon">HTML5/CSS3</div>
                <div class="tech-icon">JavaScript</div>
            </div>
        </div>
    </div>

    <script>
        // –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ (–º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ —á–µ—Ä–µ–∑ API –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
        const clusterData = {
            cluster: {
                ready: true,
                name: "kind-clerikc.ru",
                version: "v1.30.0"
            },
            nodes: {
                total: 3,
                ready: 3
            },
            pods: {
                total: 8,
                running: 7,
                pending: 1,
                namespaces: ["default", "kube-system", "ingress-nginx"]
            },
            services: {
                total: 5,
                external: 2,
                internal: 3
            },
            ingress: {
                available: true,
                ssl: true,
                rules: 3
            }
        };

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫
        function updateMetrics() {
            const now = new Date();
            document.getElementById('lastUpdate').textContent = now.toLocaleTimeString();
            document.getElementById('updateTime').textContent = now.toLocaleTimeString();
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∫–æ–ª–µ–±–∞–Ω–∏—è –¥–ª—è "–∂–∏–≤–æ—Å—Ç–∏"
            const randomFactor = Math.random() * 0.2 + 0.9; // 0.9 - 1.1
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ —Å–ª—É—á–∞–π–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
            document.getElementById('nodeCount').textContent = clusterData.nodes.total;
            document.getElementById('readyNodes').textContent = clusterData.nodes.ready;
            document.getElementById('availability').textContent = '100%';
            
            document.getElementById('podCount').textContent = clusterData.pods.total;
            document.getElementById('runningPods').textContent = clusterData.pods.running;
            document.getElementById('pendingPods').textContent = clusterData.pods.pending;
            
            document.getElementById('serviceCount').textContent = clusterData.services.total;
            document.getElementById('externalServices').textContent = clusterData.services.external;
            document.getElementById('internalServices').textContent = clusterData.services.internal;
            
            document.getElementById('ingressRules').textContent = clusterData.ingress.rules;
            document.getElementById('ingressCount').textContent = clusterData.ingress.rules;
            document.getElementById('sslStatus').textContent = clusterData.ingress.ssl ? 'üîí' : 'üîì';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—É—é —Å–µ—Ç–∫—É
            document.getElementById('clusterName').textContent = clusterData.cluster.name;
            document.getElementById('k8sVersion').textContent = clusterData.cluster.version;
            document.getElementById('totalPods').textContent = clusterData.pods.total;
            document.getElementById('runningCount').textContent = clusterData.pods.running;
            document.getElementById('namespaces').textContent = clusterData.pods.namespaces.join(', ');
            document.getElementById('totalServices').textContent = clusterData.services.total;
            document.getElementById('externalCount').textContent = clusterData.services.external;
            document.getElementById('ingressStatus').textContent = clusterData.ingress.available ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω';
            document.getElementById('sslText').textContent = clusterData.ingress.ssl ? '–í–∫–ª—é—á–µ–Ω' : '–í—ã–∫–ª—é—á–µ–Ω';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–æ–≤
            const podsStatusText = document.getElementById('podsStatusText');
            if (clusterData.pods.running === clusterData.pods.total) {
                podsStatusText.textContent = '–í—Å–µ –ø–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ';
            } else if (clusterData.pods.running > 0) {
                podsStatusText.textContent = `${clusterData.pods.running}/${clusterData.pods.total} –ø–æ–¥–æ–≤ –∑–∞–ø—É—â–µ–Ω—ã`;
            } else {
                podsStatusText.textContent = '–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∞–º–∏';
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            const metrics = document.querySelectorAll('.metric');
            metrics.forEach(metric => {
                metric.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    metric.style.transform = 'scale(1)';
                }, 300);
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            updateMetrics();
            
            // –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            setInterval(updateMetrics, 30000);
            
            // –°–ª—É—á–∞–π–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ "–∂–∏–≤–æ—Å—Ç–∏"
            setInterval(() => {
                // –°–ª—É—á–∞–π–Ω–æ –º–µ–Ω—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ running –ø–æ–¥–æ–≤
                const change = Math.random() > 0.7 ? (Math.random() > 0.5 ? 1 : -1) : 0;
                const newRunning = Math.max(1, Math.min(clusterData.pods.total, clusterData.pods.running + change));
                clusterData.pods.running = newRunning;
                clusterData.pods.pending = clusterData.pods.total - newRunning;
                
                updateMetrics();
            }, 15000);
        });
    </script>
</body>
</html>